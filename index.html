<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CLOISONNE ENAMEL | Jewelry Showcase</title>
    <meta name="description" content="Explore exclusive handmade cloisonne enamel jewelry by Nino Kartsivadze. Discover unique rings, pendants, and earrings crafted in Tbilisi, Georgia.">
    <style>
        :root { --primary: #D4AF37; --primary-dark: #9B7C2E; --bg: #121212; --bg-dark: #080808; --glass: rgba(255, 255, 255, 0.05); --glass-dark: rgba(0, 0, 0, 0.2); --text-light: rgba(255, 255, 255, 0.9); --text-dark: rgba(0, 0, 0, 0.8); --shadow-dark: rgba(0, 0, 0, 0.2); --shadow-light: rgba(255, 255, 255, 0.05); } * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Montserrat', sans-serif; } body { background: var(--bg); color: var(--text-light); overflow-x: hidden; min-height: 100vh; position: relative; } #particles-js { position: fixed; width: 100%; height: 100%; top: 0; left: 0; z-index: -1; } header { padding: 4rem 2rem 2rem; margin-bottom: 3rem; display: flex; flex-direction: column; align-items: center; } .logo { font-size: clamp(1.5rem, 6vw, 3.5rem); letter-spacing: clamp(0.15rem, 2vw, 0.5rem); white-space: nowrap; font-weight: 300; color: var(--primary); position: relative; display: inline-block; } .logo span { display: inline-block; opacity: 0; transform: translateY(20px); animation: letterAppear 0.8s forwards; } @keyframes letterAppear { to { opacity: 1; transform: translateY(0); } } .logo span:nth-child(1) { animation-delay: 0.1s; } .logo span:nth-child(2) { animation-delay: 0.2s; } .logo span:nth-child(3) { animation-delay: 0.3s; } .logo span:nth-child(4) { animation-delay: 0.4s; } .logo span:nth-child(5) { animation-delay: 0.5s; } .logo span:nth-child(6) { animation-delay: 0.6s; } .logo span:nth-child(7) { animation-delay: 0.7s; } .logo span:nth-child(8) { animation-delay: 0.8s; } .logo span:nth-child(9) { animation-delay: 0.9s; } .logo span:nth-child(10) { animation-delay: 1.0s; } .logo span:nth-child(11) { animation-delay: 1.1s; } .logo span:nth-child(12) { animation-delay: 1.2s; } .logo span:nth-child(13) { animation-delay: 1.3s; } .logo span:nth-child(14) { animation-delay: 1.4s; } .subtitle { margin-top: 1rem; font-weight: 300; letter-spacing: 0.3rem; opacity: 0; transform: translateY(20px); animation: fadeInUp 1s 1.5s forwards; } @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } } .container { max-width: 1200px; margin: 0 auto; padding: 0 2rem; } .products-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 2rem; margin-bottom: 4rem; } .product-card { background: var(--glass); border-radius: 24px; box-shadow: 8px 8px 16px var(--shadow-dark), -8px -8px 16px var(--shadow-light); backdrop-filter: blur(12px); transition: transform 0.4s, box-shadow 0.4s; overflow: hidden; opacity: 0; transform: translateY(30px); animation: cardAppear 0.8s forwards; animation-delay: calc(var(--delay) * 0.1s); position: relative; border: 1px solid rgba(212, 175, 55, 0.1); } @keyframes cardAppear { to { opacity: 1; transform: translateY(0); } } .product-card:hover { transform: translateY(-8px); box-shadow: 12px 12px 24px var(--shadow-dark), -12px -12px 24px var(--shadow-light); } .slideshow-container { width: 100%; height: 250px; position: relative; overflow: hidden; -webkit-mask-image: -webkit-radial-gradient(white, black); } .product-image-container { clip-path: polygon(0 0, 100% 0, 100% 85%, 0 100%); transition: clip-path 0.5s ease; } .product-card:hover .product-image-container { clip-path: polygon(0 0, 100% 0, 100% 100%, 0 85%); } .slideshow-item { width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0; opacity: 0; transition: opacity 1.2s ease-in-out; pointer-events: none; } .slideshow-item.active { opacity: 1; } .slideshow-item-video { width: 140%; height: 140%; top: -20%; left: -20%; } .slideshow-item-video iframe { width: 100%; height: 100%; border: none; } .slideshow-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 2; cursor: grab; } .product-info { padding: 1.5rem; } .product-title { font-size: 1.2rem; margin-bottom: 0.5rem; color: var(--primary); } .product-price { font-weight: 700; margin-bottom: 1rem; } .gold-button { display: inline-block; text-decoration: none; text-align: center; background: none; border: none; color: var(--primary); padding: 0.8rem 1.5rem; font-size: 1rem; border-radius: 50px; position: relative; overflow: hidden; cursor: pointer; z-index: 1; transition: color 0.3s; border: 1px solid rgba(212, 175, 55, 0.3); box-shadow: 4px 4px 8px var(--shadow-dark), -4px -4px 8px var(--shadow-light); } .gold-button::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: var(--primary); z-index: -1; clip-path: circle(0% at 50% 50%); transition: clip-path 0.5s ease; } .gold-button:hover { color: var(--bg); } .gold-button:hover::before { clip-path: circle(100% at 50% 50%); } nav { display: flex; justify-content: center; margin-bottom: 3rem; flex-wrap: wrap; gap: 1rem; } .nav-link { margin: 0 1rem; color: var(--text-light); text-decoration: none; position: relative; padding: 0.5rem 0; opacity: 0; animation: fadeIn 1s forwards; animation-delay: calc(var(--delay) * 0.2s); } @keyframes fadeIn { to { opacity: 1; } } .nav-link::after { content: ''; position: absolute; bottom: 0; left: 0; width: 0; height: 1px; background: var(--primary); transition: width 0.3s ease; } .nav-link:hover::after, .nav-link.active::after { width: 100%; } footer { text-align: center; padding: 2rem; margin-top: 4rem; opacity: 0; animation: fadeIn 1s 1.5s forwards; } .admin-trigger-footer { cursor: pointer; transition: color 0.3s ease; } .admin-trigger-footer:hover { color: var(--primary); }
        #main-h1, #main-h2 { text-align: center; opacity: 0; animation: titleFadeIn 1.2s forwards; text-transform: uppercase; } #main-h1 { font-size: clamp(0.9rem, 2.5vw, 1.1rem); font-weight: 400; color: var(--text-light); letter-spacing: 0.15rem; margin-bottom: 0.75rem; animation-delay: 1.8s; } #main-h2 { font-size: clamp(0.7rem, 2vw, 0.8rem); font-weight: 300; color: var(--primary); letter-spacing: 0.1rem; margin-bottom: 3.5rem; animation-delay: 2.0s; } @keyframes titleFadeIn { from { opacity: 0; transform: translateY(25px); } to { opacity: 1; transform: translateY(0); } }
        @media (max-width: 500px) { #main-h1 { font-size: 2.8vw; letter-spacing: 0.1rem; } #main-h2 { font-size: 2.3vw; letter-spacing: 0.08rem; margin-bottom: 2.5rem; } }
        .admin-panel-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.8); backdrop-filter: blur(10px); z-index: 9998; display: flex; justify-content: center; align-items: center; opacity: 0; visibility: hidden; transition: all 0.5s; } .admin-panel-overlay.active { opacity: 1; visibility: visible; } .admin-panel-content { background: var(--bg-dark); border-radius: 16px; padding: 2rem; width: 90%; max-width: 800px; max-height: 90vh; overflow-y: auto; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3); border: 1px solid rgba(212, 175, 55, 0.2); } .admin-panel-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 1px solid rgba(212, 175, 55, 0.2); } .admin-panel-title { font-size: 1.5rem; color: var(--primary); } .admin-panel-close { background: none; border: none; color: var(--text-light); font-size: 1.5rem; cursor: pointer; } .admin-tabs { display: flex; margin-bottom: 1.5rem; border-bottom: 1px solid rgba(212, 175, 55, 0.2); flex-wrap: wrap; } .admin-tab { padding: 0.5rem 1rem; cursor: pointer; border-bottom: 2px solid transparent; transition: all 0.3s; } .admin-tab.active { border-bottom: 2px solid var(--primary); color: var(--primary); } .admin-tab[data-tab="logout"] { margin-left: auto; color: #ff8c8c; border-bottom: 2px solid transparent; } .admin-tab[data-tab="logout"]:hover { color: #ff4d4d; } .admin-tab-content { display: none; } .admin-tab-content.active { display: block; }
        .lang-tabs { display: flex; margin-bottom: 1rem; border-bottom: 1px solid rgba(212, 175, 55, 0.1); } .lang-tab { padding: 0.5rem 1rem; cursor: pointer; background: var(--glass); border: 1px solid transparent; border-bottom: none; border-radius: 8px 8px 0 0; } .lang-tab.active { background: var(--glass-dark); border-color: rgba(212, 175, 55, 0.2); } .lang-tab-content { display: none; padding: 1rem; border: 1px solid rgba(212, 175, 55, 0.1); border-radius: 0 8px 8px 8px; } .lang-tab-content.active { display: block; }
        .admin-form-group { margin-bottom: 1.5rem; } .admin-form-label { display: block; margin-bottom: 0.5rem; color: var(--primary); } .admin-form-input, .admin-form-textarea, .admin-form-select { width: 100%; padding: 0.8rem; background: var(--glass); border: 1px solid rgba(212, 175, 55, 0.2); border-radius: 8px; color: var(--text-light); font-family: inherit; } .admin-form-textarea { min-height: 100px; resize: vertical; } .admin-form-input[readonly] { background: rgba(0,0,0,0.2); opacity: 0.7; cursor: not-allowed; } .admin-form-actions { display: flex; justify-content: flex-end; gap: 1rem; margin-top: 2rem; } .admin-button-primary { background: var(--primary); color: var(--bg-dark); border: none; padding: 0.8rem 1.5rem; border-radius: 8px; cursor: pointer; transition: all 0.3s; } .admin-button-primary:hover { background: var(--primary-dark); } .admin-button-secondary { background: none; color: var(--primary); border: 1px solid var(--primary); padding: 0.8rem 1.5rem; border-radius: 8px; cursor: pointer; transition: all 0.3s; } .admin-button-secondary:hover { background: rgba(212, 175, 55, 0.1); } .admin-products-list, .admin-blog-posts-list, .admin-categories-list { display: grid; gap: 1rem; } .admin-product-item, .admin-blog-post-item, .admin-category-item { background: var(--glass); padding: 1rem; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; border: 1px solid rgba(212, 175, 55, 0.1); } .admin-product-actions, .admin-blog-post-actions, .admin-category-actions { display: flex; gap: 0.5rem; } .admin-product-edit, .admin-blog-post-edit, .admin-category-edit, .admin-product-delete, .admin-blog-post-delete, .admin-category-delete { background: none; border: none; color: var(--text-light); cursor: pointer; padding: 0.5rem; border-radius: 4px; transition: all 0.3s; } .admin-product-edit, .admin-blog-post-edit, .admin-category-edit { background: rgba(212, 175, 55, 0.2); } .admin-product-edit:hover, .admin-blog-post-edit:hover { background: rgba(212, 175, 55, 0.4); } .admin-product-delete, .admin-blog-post-delete, .admin-category-delete { background: rgba(255, 0, 0, 0.2); } .admin-product-delete:hover, .admin-blog-post-delete:hover { background: rgba(255, 0, 0, 0.4); } @media (max-width: 768px) { .products-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div id="particles-js"></div>
    <header>
        <a href="index.html" style="text-decoration: none;"><div class="logo"><span>C</span><span>L</span><span>O</span><span>I</span><span>S</span><span>O</span><span>N</span><span>N</span><span>É</span> <span>E</span><span>N</span><span>A</span><span>M</span><span>E</span><span>L</span></div></a>
        <p class="subtitle">NINO KARTSIVADZE</p>
    </header>
    <nav></nav>
    <div class="container">
        <h1 id="main-h1">Artisan Georgian Enamel Jewelry</h1>
        <h2 id="main-h2">Discover the Art of Minankari by Nino Kartsivadze</h2>
        <div class="products-grid" id="products-container"></div>
    </div>
    <footer>
        <p>© 2024 <span id="admin-footer-trigger" class="admin-trigger-footer">CLOISONNE ENAMEL</span>. All rights reserved.</p>
    </footer>

    <!-- Admin Panel Structure -->
    <div class="admin-panel-overlay" id="admin-panel">
        <div class="admin-panel-content">
            <div class="admin-panel-header">
                <h2 class="admin-panel-title">Admin Panel</h2>
                <button class="admin-panel-close" id="admin-close">&times;</button>
            </div>

            <!-- Login Form Container -->
            <div id="admin-login-form-container">
                <form id="admin-login-form">
                    <div class="admin-form-group">
                        <label for="admin-email" class="admin-form-label">Email</label>
                        <input type="email" id="admin-email" class="admin-form-input" required>
                    </div>
                    <div class="admin-form-group">
                        <label for="admin-password" class="admin-form-label">Password</label>
                        <input type="password" id="admin-password" class="admin-form-input" required>
                    </div>
                    <p id="admin-login-error" style="color: #ff8c8c; margin-bottom: 1rem; display: none;"></p>
                    <div class="admin-form-actions">
                        <button type="submit" class="admin-button-primary">Log In</button>
                    </div>
                </form>
            </div>

            <!-- Main Admin Content (hidden by default) -->
            <div id="admin-content-container" style="display: none;">
                <div class="admin-tabs">
                    <div class="admin-tab active" data-tab="products">Products</div>
                    <div class="admin-tab" data-tab="categories">Categories</div>
                    <div class="admin-tab" data-tab="blog">Blog</div>
                    <div class="admin-tab" data-tab="about-me">About Me</div>
                    <div class="admin-tab" data-tab="logout">Log Out</div>
                </div>
                <!-- Products Tab -->
                <div class="admin-tab-content active" id="products-tab">
                    <form id="product-form">
                        <input type="hidden" id="product-id">
                        <div class="admin-form-group"><label for="product-title" class="admin-form-label">Title</label><input type="text" id="product-title" class="admin-form-input" required></div>
                        <div class="admin-form-group"><label for="product-category" class="admin-form-label">Category</label><select id="product-category" class="admin-form-select" required><option value="">Select category</option></select></div>
                        <div class="admin-form-group"><label for="product-images" class="admin-form-label">Image or YouTube URLs (one per line)</label><textarea id="product-images" class="admin-form-textarea" required rows="4"></textarea></div>
                        <div class="admin-form-group"><label for="product-description" class="admin-form-label">Description</label><textarea id="product-description" class="admin-form-textarea" required></textarea></div>
                        <div class="admin-form-group"><label for="product-features" class="admin-form-label">Features (one per line)</label><textarea id="product-features" class="admin-form-textarea" required></textarea></div>
                        <div class="admin-form-group"><label for="product-price" class="admin-form-label">Price</label><input type="text" id="product-price" class="admin-form-input" required></div>
                        <div class="admin-form-actions"><button type="button" class="admin-button-secondary" id="product-cancel">Cancel</button><button type="submit" class="admin-button-primary">Save Product</button></div>
                    </form>
                    <hr style="border-color: rgba(212, 175, 55, 0.2); margin: 2rem 0;">
                    <label class="admin-form-label">Product List</label>
                    <div class="admin-products-list" id="admin-products-list"></div>
                </div>
                <!-- Categories Tab -->
                <div class="admin-tab-content" id="categories-tab">
                    <form id="category-form">
                        <input type="hidden" id="category-id">
                        <div class="admin-form-group"><label for="category-name" class="admin-form-label">Name</label><input type="text" id="category-name" class="admin-form-input" required></div>
                        <div class="admin-form-actions"><button type="button" class="admin-button-secondary" id="category-cancel">Cancel</button><button type="submit" class="admin-button-primary">Save Category</button></div>
                    </form>
                    <hr style="border-color: rgba(212, 175, 55, 0.2); margin: 2rem 0;">
                    <label class="admin-form-label">Category List</label>
                    <div class="admin-categories-list" id="admin-categories-list"></div>
                </div>
                <!-- Blog Tab -->
                <div class="admin-tab-content" id="blog-tab">
                    <form id="blog-post-form">
                        <input type="hidden" id="blog-post-id">
                        <div class="lang-tabs" id="blog-lang-tabs">
                            <div class="lang-tab active" data-lang="en">English</div><div class="lang-tab" data-lang="ka">Georgian</div><div class="lang-tab" data-lang="ru">Russian</div>
                        </div>
                        <div class="lang-tab-content active" id="blog-lang-content-en">
                            <div class="admin-form-group"><label for="blog-title-en" class="admin-form-label">Title (EN)</label><input type="text" id="blog-title-en" class="admin-form-input lang-title-field" data-lang="en"></div>
                            <div class="admin-form-group"><label for="blog-subtitle-en" class="admin-form-label">Subtitle (EN)</label><input type="text" id="blog-subtitle-en" class="admin-form-input"></div>
                            <div class="admin-form-group"><label for="blog-content-en" class="admin-form-label">Content (EN)</label><textarea id="blog-content-en" class="admin-form-textarea" rows="6"></textarea></div>
                            <div class="admin-form-group"><label for="blog-slug-en" class="admin-form-label">Slug (EN)</label><input type="text" id="blog-slug-en" class="admin-form-input" readonly></div>
                            <!-- ИЗМЕНЕНИЕ НАЧАЛО: Добавлены новые поля в HTML -->
                            <div class="admin-form-group">
                                <label for="blog-seo-title-en" class="admin-form-label">SEO Title (for Google Search & Browser Tab)</label>
                                <input type="text" id="blog-seo-title-en" class="admin-form-input">
                            </div>
                            <div class="admin-form-group">
                                <label for="blog-meta-description-en" class="admin-form-label">Meta Description (for Google Search Snippet)</label>
                                <textarea id="blog-meta-description-en" class="admin-form-textarea" rows="3"></textarea>
                            </div>
                            <!-- ИЗМЕНЕНИЕ КОНЕЦ -->
                        </div>
                        <div class="lang-tab-content" id="blog-lang-content-ka">
                            <div class="admin-form-group"><label for="blog-title-ka" class="admin-form-label">Title (KA)</label><input type="text" id="blog-title-ka" class="admin-form-input lang-title-field" data-lang="ka"></div>
                            <div class="admin-form-group"><label for="blog-subtitle-ka" class="admin-form-label">Subtitle (KA)</label><input type="text" id="blog-subtitle-ka" class="admin-form-input"></div>
                            <div class="admin-form-group"><label for="blog-content-ka" class="admin-form-label">Content (KA)</label><textarea id="blog-content-ka" class="admin-form-textarea" rows="6"></textarea></div>
                            <div class="admin-form-group"><label for="blog-slug-ka" class="admin-form-label">Slug (KA)</label><input type="text" id="blog-slug-ka" class="admin-form-input" readonly></div>
                            <!-- ИЗМЕНЕНИЕ НАЧАЛО: Добавлены новые поля в HTML -->
                            <div class="admin-form-group">
                                <label for="blog-seo-title-ka" class="admin-form-label">SEO Title (for Google Search & Browser Tab)</label>
                                <input type="text" id="blog-seo-title-ka" class="admin-form-input">
                            </div>
                            <div class="admin-form-group">
                                <label for="blog-meta-description-ka" class="admin-form-label">Meta Description (for Google Search Snippet)</label>
                                <textarea id="blog-meta-description-ka" class="admin-form-textarea" rows="3"></textarea>
                            </div>
                            <!-- ИЗМЕНЕНИЕ КОНЕЦ -->
                        </div>
                        <div class="lang-tab-content" id="blog-lang-content-ru">
                            <div class="admin-form-group"><label for="blog-title-ru" class="admin-form-label">Title (RU)</label><input type="text" id="blog-title-ru" class="admin-form-input lang-title-field" data-lang="ru"></div>
                            <div class="admin-form-group"><label for="blog-subtitle-ru" class="admin-form-label">Subtitle (RU)</label><input type="text" id="blog-subtitle-ru" class="admin-form-input"></div>
                            <div class="admin-form-group"><label for="blog-content-ru" class="admin-form-label">Content (RU)</label><textarea id="blog-content-ru" class="admin-form-textarea" rows="6"></textarea></div>
                            <div class="admin-form-group"><label for="blog-slug-ru" class="admin-form-label">Slug (RU)</label><input type="text" id="blog-slug-ru" class="admin-form-input" readonly></div>
                            <!-- ИЗМЕНЕНИЕ НАЧАЛО: Добавлены новые поля в HTML -->
                            <div class="admin-form-group">
                                <label for="blog-seo-title-ru" class="admin-form-label">SEO Title (for Google Search & Browser Tab)</label>
                                <input type="text" id="blog-seo-title-ru" class="admin-form-input">
                            </div>
                            <div class="admin-form-group">
                                <label for="blog-meta-description-ru" class="admin-form-label">Meta Description (for Google Search Snippet)</label>
                                <textarea id="blog-meta-description-ru" class="admin-form-textarea" rows="3"></textarea>
                            </div>
                            <!-- ИЗМЕНЕНИЕ КОНЕЦ -->
                        </div>
                        <div class="admin-form-group" style="margin-top: 1.5rem;"><label for="blog-post-media" class="admin-form-label">Image or YouTube URLs (common for all languages)</label><textarea id="blog-post-media" class="admin-form-textarea" rows="4"></textarea></div>
                        <div class="admin-form-actions"><button type="button" class="admin-button-secondary" id="blog-post-cancel">Cancel</button><button type="submit" class="admin-button-primary">Save Post</button></div>
                    </form>
                    <hr style="border-color: rgba(212, 175, 55, 0.2); margin: 2rem 0;">
                    <label class="admin-form-label">Blog Post List</label>
                    <div class="admin-blog-posts-list" id="admin-blog-posts-list"></div>
                </div>
                <!-- About Me Tab -->
                <div class="admin-tab-content" id="about-me-tab">
                    <form id="about-me-form">
                        <div class="admin-form-group"><label for="about-me-text-input" class="admin-form-label">Text / Biography</label><textarea id="about-me-text-input" class="admin-form-textarea" rows="10"></textarea></div>
                        <div class="admin-form-group"><label for="about-me-images-input" class="admin-form-label">Image or YouTube URLs (one per line)</label><textarea id="about-me-images-input" class="admin-form-textarea" rows="5"></textarea></div>
                        <div class="admin-form-actions"><button type="submit" class="admin-button-primary">Save "About Me" Content</button></div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://www.youtube.com/iframe_api"></script>
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    
    <script>
        window.onYouTubeIframeAPIReady = function() {};

        function initializeSite() {
            const firebaseConfig = {
              apiKey: "AIzaSyAxOUOxaufE60eVuyOq_P66MJ9ls_7p470",
              authDomain: "nini-shop-7c89d.firebaseapp.com",
              projectId: "nini-shop-7c89d",
              storageBucket: "nini-shop-7c89d.appspot.com",
              messagingSenderId: "595482257713",
              appId: "1:595482257713:web:3e3d3bf75f03c08e58a810",
              measurementId: "G-0HX4N09DYT"
            };
            if (!firebase.apps.length) { firebase.initializeApp(firebaseConfig); }
            const db = firebase.firestore();
            const auth = firebase.auth();
            const particleConfig = { "particles": { "number": { "value": 80, "density": { "enable": true, "value_area": 800 }}, "color": { "value": "#D4AF37" }, "shape": { "type": "circle" }, "opacity": { "value": 0.5, "random": true, "anim": { "enable": true, "speed": 1, "opacity_min": 0.1 }}, "size": { "value": 3, "random": true, "anim": { "enable": true, "speed": 2, "size_min": 0.1 }}, "line_linked": { "enable": true, "distance": 150, "color": "#D4AF37", "opacity": 0.2, "width": 1 }, "move": { "enable": true, "speed": 1, "direction": "none", "random": true, "out_mode": "out" }}, "interactivity": { "events": { "onhover": { "enable": true, "mode": "grab" }, "onclick": { "enable": true, "mode": "push" }}}, "retina_detect": true };
            if (document.getElementById('particles-js')) { particlesJS('particles-js', particleConfig); }

            let aboutMeContent = {}, products = {}, categories = {}, blogPosts = {};

            function generateSlug(text) { if (typeof text !== 'string' || !text.trim()) return ''; const translit = { 'а':'a','б':'b','в':'v','г':'g','д':'d','е':'e','ё':'e','ж':'zh','з':'z','и':'i','й':'y','к':'k','л':'l','м':'m','н':'n','о':'o','п':'p','р':'r','с':'s','т':'t','у':'u','ф':'f','х':'h','ц':'c','ч':'ch','ш':'sh','щ':'sch','ъ':'','ы':'y','ь':'','э':'e','ю':'yu','я':'ya','ა':'a','ბ':'b','გ':'g','დ':'d','ე':'e','ვ':'v','ზ':'z','თ':'t','ი':'i','კ':'k','ლ':'l','მ':'m','ნ':'n','ო':'o','პ':'p','ჟ':'zh','რ':'r','ს':'s','ტ':'t','უ':'u','ფ':'p','ქ':'k','ღ':'gh','ყ':'q','შ':'sh','ჩ':'ch','ც':'ts','ძ':'dz','წ':'ts','ჭ':'ch','ხ':'kh','ჯ':'j','ჰ':'h' }; return text.toLowerCase().trim().split('').map(char => translit[char] || char).join('').replace(/\s+/g, '-').replace(/[^\w-]+/g, '').replace(/--+/g, '-').replace(/^-+/, '').replace(/-+$/, ''); }
            function isYoutubeUrl(url) { return /^(https?:\/\/)?(www\.)?(youtube\.com|youtu\.?be)\/.+$/.test(url); }
            function getYoutubeEmbedUrl(url) { let videoId; try { const urlObj = new URL(url); videoId = (urlObj.hostname === 'youtu.be') ? urlObj.pathname.slice(1) : urlObj.searchParams.get('v'); } catch(e) { return null; } return videoId ? `https://www.youtube.com/embed/${videoId}?enablejsapi=1&autoplay=1&mute=1&controls=0&loop=1&playlist=${videoId}&origin=${window.location.origin}` : null; }
            function setupSlideshow(container) { if (!container) return; const slides = Array.from(container.querySelectorAll('.slideshow-item')); if (slides.length <= 1) { if (slides.length === 1) slides[0].classList.add('active'); return; } if (container.querySelector('.slideshow-overlay')) return; const overlay = document.createElement('div'); overlay.className = 'slideshow-overlay'; container.appendChild(overlay); let currentIndex = 0, intervalId = setInterval(() => showSlide(currentIndex + 1), 4000); function showSlide(index) { const oldSlide = slides[currentIndex]; if (oldSlide) oldSlide.classList.remove('active'); currentIndex = (index + slides.length) % slides.length; const newSlide = slides[currentIndex]; if (newSlide) setTimeout(() => newSlide.classList.add('active'), 1300); } function manualSlide(dir) { clearInterval(intervalId); showSlide(currentIndex + dir); intervalId = setInterval(() => showSlide(currentIndex + 1), 4000); } let touchStartX = 0; overlay.addEventListener('mousedown', e => { touchStartX = e.clientX; clearInterval(intervalId); }); overlay.addEventListener('mouseup', e => { if (e.clientX < touchStartX - 50) manualSlide(1); else if (e.clientX > touchStartX + 50) manualSlide(-1); intervalId = setInterval(() => showSlide(currentIndex + 1), 4000); }); showSlide(0); }
            async function initializeData() { try { const [aboutMeDoc, categoriesSnapshot, productsSnapshot, blogPostsSnapshot] = await Promise.all([ db.collection('site_content').doc('about_me').get(), db.collection('categories').orderBy('name').get(), db.collection('products').get(), db.collection('blog_posts').orderBy('timestamp', 'desc').get() ]); if (aboutMeDoc.exists) aboutMeContent = aboutMeDoc.data(); categories = {}; categoriesSnapshot.forEach(doc => { categories[doc.id] = { id: doc.id, ...doc.data() }; }); products = {}; productsSnapshot.forEach(doc => { products[doc.id] = { id: doc.id, ...doc.data() }; }); blogPosts = {}; blogPostsSnapshot.forEach(doc => { blogPosts[doc.id] = { id: doc.id, ...doc.data() }; }); renderNavigation(); renderProducts('all'); renderAdminUI(); } catch (error) { console.error("Error loading data from Firebase:", error); } }
            async function saveData(collection, docId, data) { try { await db.collection(collection).doc(docId).set(data, { merge: true }); alert('Saved!'); await initializeData(); } catch (error) { console.error(`Error saving to ${collection}:`, error); alert("Error saving data. Check console."); } }
            async function deleteData(collection, docId) { if (confirm('Are you sure?')) { try { await db.collection(collection).doc(docId).delete(); await initializeData(); } catch (error) { console.error(`Error deleting from ${collection}:`, error); } } }
            function renderNavigation() { const nav = document.querySelector('nav'); nav.innerHTML = ''; let delay = 1; const links = [ { href: '#', text: 'SHOW ALL', dataset: { category: 'all' }, class: 'nav-link active' }, { href: 'about.html', text: 'ABOUT ME', class: 'nav-link' }, { href: 'blog.html', text: 'BLOG', class: 'nav-link' } ]; Object.values(categories).forEach(cat => { links.push({ href: '#', text: cat.name.toUpperCase(), dataset: { category: cat.id }, class: 'nav-link' }); }); links.forEach(linkInfo => { const link = document.createElement('a'); link.href = linkInfo.href; link.textContent = linkInfo.text; link.className = linkInfo.class || 'nav-link'; if (linkInfo.dataset) { Object.keys(linkInfo.dataset).forEach(key => link.dataset[key] = linkInfo.dataset[key]); } link.style.setProperty('--delay', delay++); nav.appendChild(link); }); nav.querySelectorAll('.nav-link[data-category]').forEach(link => { link.addEventListener('click', function(e) { e.preventDefault(); nav.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active')); this.classList.add('active'); renderProducts(this.dataset.category); }); }); }
            function createMediaElement(mediaUrl) { if (isYoutubeUrl(mediaUrl)) { const embedUrl = getYoutubeEmbedUrl(mediaUrl); if (embedUrl) { const wrapper = document.createElement('div'); wrapper.className = 'slideshow-item slideshow-item-video'; const iframe = document.createElement('iframe'); iframe.src = embedUrl; wrapper.appendChild(iframe); return wrapper; } } else { const img = document.createElement('img'); img.src = mediaUrl; img.className = 'slideshow-item'; return img; } return null; }
            function renderProducts(categoryFilter) { const productsContainer = document.getElementById('products-container'); productsContainer.innerHTML = ''; let delay = 1; Object.values(products).filter(p => categoryFilter === 'all' || p.category === categoryFilter).forEach(product => { if (!product.slug || !product.category) { console.warn(`Product "${product.title}" skipped.`); return; } const productCard = document.createElement('div'); productCard.className = 'product-card'; productCard.style.setProperty('--delay', delay++); const slideshowHTML = `<div class="slideshow-container product-image-container">${(product.images || []).map(mediaUrl => createMediaElement(mediaUrl)?.outerHTML || '').join('')}</div>`; const productInfoHTML = `<div class="product-info"><h3 class="product-title">${product.title}</h3><p class="product-price">${product.price}</p><a href="product.html?slug=${product.slug}" class="gold-button">VIEW DETAILS</a></div>`; productCard.innerHTML = slideshowHTML + productInfoHTML; productsContainer.appendChild(productCard); setupSlideshow(productCard.querySelector('.slideshow-container')); }); }
            function renderAdminUI() { document.getElementById('admin-products-list').innerHTML = Object.values(products).map(p => `<div class="admin-product-item"><div><strong>${p.title}</strong> (${categories[p.category]?.name || 'Uncategorized'})</div><div class="admin-product-actions"><button class="admin-product-edit" data-id="${p.id}">✏️</button><button class="admin-product-delete" data-id="${p.id}">🗑️</button></div></div>`).join(''); document.getElementById('admin-categories-list').innerHTML = Object.values(categories).map(c => `<div class="admin-category-item"><div><strong>${c.name}</strong></div><div class="admin-category-actions"><button class="admin-category-edit" data-id="${c.id}">✏️</button><button class="admin-category-delete" data-id="${c.id}">🗑️</button></div></div>`).join(''); document.getElementById('product-category').innerHTML = '<option value="">Select category</option>' + Object.values(categories).map(c => `<option value="${c.id}">${c.name}</option>`).join(''); document.getElementById('admin-blog-posts-list').innerHTML = Object.values(blogPosts).map(post => { const primaryTitle = post.i18n?.en?.title || post.i18n?.ka?.title || post.i18n?.ru?.title || post.title || 'Untitled Post'; return `<div class="admin-blog-post-item"><div><strong>${primaryTitle}</strong></div><div class="admin-blog-post-actions"><button class="admin-blog-post-edit" data-id="${post.id}">✏️</button><button class="admin-blog-post-delete" data-id="${post.id}">🗑️</button></div></div>`; }).join(''); document.getElementById('about-me-text-input').value = aboutMeContent.text || ''; document.getElementById('about-me-images-input').value = (aboutMeContent.images || []).join('\n'); }

            function setupAdminListeners() {
                const adminPanel = document.getElementById('admin-panel');
                const loginFormContainer = document.getElementById('admin-login-form-container');
                const adminContentContainer = document.getElementById('admin-content-container');
                const loginForm = document.getElementById('admin-login-form');
                const loginError = document.getElementById('admin-login-error');
                
                const productForm = document.getElementById('product-form'), categoryForm = document.getElementById('category-form'), blogPostForm = document.getElementById('blog-post-form'), aboutMeForm = document.getElementById('about-me-form');
                const langs = ['en', 'ka', 'ru'];

                auth.onAuthStateChanged(user => {
                    if (user) {
                        loginFormContainer.style.display = 'none';
                        adminContentContainer.style.display = 'block';
                    } else {
                        loginFormContainer.style.display = 'block';
                        adminContentContainer.style.display = 'none';
                    }
                });

                document.getElementById('admin-footer-trigger').addEventListener('click', () => {
                    adminPanel.classList.add('active');
                });

                loginForm.addEventListener('submit', e => {
                    e.preventDefault();
                    loginError.style.display = 'none';
                    const email = loginForm.elements['admin-email'].value;
                    const password = loginForm.elements['admin-password'].value;
                    
                    auth.signInWithEmailAndPassword(email, password)
                        .catch(error => {
                            console.error("Login failed:", error);
                            loginError.textContent = "Incorrect email or password.";
                            loginError.style.display = 'block';
                        });
                });

                adminPanel.addEventListener('click', e => {
                    const target = e.target;
                    
                    if (target.classList.contains('admin-tab')) {
                        if (target.dataset.tab === 'logout') {
                            if (confirm("Are you sure you want to log out?")) {
                                auth.signOut();
                            }
                            return;
                        }
                        adminPanel.querySelectorAll('.admin-tab, .admin-tab-content').forEach(el => el.classList.remove('active'));
                        target.classList.add('active');
                        adminPanel.querySelector(`#${target.dataset.tab}-tab`).classList.add('active');
                    }
                    
                    if (target.id === 'admin-close' || target === adminPanel) {
                        adminPanel.classList.remove('active');
                    }
                    
                    if (target.id === 'product-cancel') { productForm.reset(); productForm.elements['product-id'].value = ''; }
                    if (target.id === 'category-cancel') { categoryForm.reset(); categoryForm.elements['category-id'].value = ''; }
                    if (target.id === 'blog-post-cancel') { blogPostForm.reset(); blogPostForm.elements['blog-post-id'].value = ''; }
                });
                
                document.getElementById('admin-products-list').addEventListener('click', e => { const editBtn = e.target.closest('.admin-product-edit'); if (editBtn) { const p = products[editBtn.dataset.id]; productForm.elements['product-id'].value = p.id; productForm.elements['product-title'].value = p.title; productForm.elements['product-category'].value = p.category; productForm.elements['product-images'].value = (p.images || []).join('\n'); productForm.elements['product-description'].value = p.description; productForm.elements['product-features'].value = (p.features || []).join('\n'); productForm.elements['product-price'].value = p.price; document.querySelector('.admin-tab[data-tab="products"]').click(); } const deleteBtn = e.target.closest('.admin-product-delete'); if (deleteBtn) deleteData('products', deleteBtn.dataset.id); });
                document.getElementById('admin-categories-list').addEventListener('click', e => { const editBtn = e.target.closest('.admin-category-edit'); if (editBtn) { const c = categories[editBtn.dataset.id]; categoryForm.elements['category-id'].value = c.id; categoryForm.elements['category-name'].value = c.name; document.querySelector('.admin-tab[data-tab="categories"]').click(); } const deleteBtn = e.target.closest('.admin-category-delete'); if (deleteBtn) deleteData('categories', deleteBtn.dataset.id); });
                document.getElementById('admin-blog-posts-list').addEventListener('click', e => {
                    const editBtn = e.target.closest('.admin-blog-post-edit');
                    if (editBtn) {
                        const post = blogPosts[editBtn.dataset.id];
                        blogPostForm.reset();
                        blogPostForm.elements['blog-post-id'].value = post.id;
                        langs.forEach(lang => {
                            const langData = post.i18n?.[lang] || {};
                            document.getElementById(`blog-title-${lang}`).value = langData.title || '';
                            document.getElementById(`blog-subtitle-${lang}`).value = langData.subtitle || '';
                            document.getElementById(`blog-content-${lang}`).value = langData.content || '';
                            document.getElementById(`blog-slug-${lang}`).value = langData.slug || '';
                            // <!-- ИЗМЕНЕНИЕ НАЧАЛО: Заполняем новые поля при редактировании -->
                            const seoTitleInput = document.getElementById(`blog-seo-title-${lang}`);
                            const metaDescInput = document.getElementById(`blog-meta-description-${lang}`);
                            if(seoTitleInput) seoTitleInput.value = langData.seoTitle || '';
                            if(metaDescInput) metaDescInput.value = langData.metaDescription || '';
                            // <!-- ИЗМЕНЕНИЕ КОНЕЦ -->
                        });
                        document.getElementById('blog-post-media').value = (post.mediaUrls || []).join('\n');
                        document.querySelector('.admin-tab[data-tab="blog"]').click();
                    }
                    const deleteBtn = e.target.closest('.admin-blog-post-delete');
                    if (deleteBtn) deleteData('blog_posts', deleteBtn.dataset.id);
                });
                productForm.addEventListener('submit', e => { e.preventDefault(); const id = productForm.elements['product-id'].value || db.collection('products').doc().id; const title = productForm.elements['product-title'].value; saveData('products', id, { id, title, slug: generateSlug(title), category: productForm.elements['product-category'].value, images: productForm.elements['product-images'].value.split('\n').filter(Boolean), description: productForm.elements['product-description'].value, features: productForm.elements['product-features'].value.split('\n').filter(Boolean), price: productForm.elements['product-price'].value }); productForm.reset(); productForm.elements['product-id'].value = ''; });
                categoryForm.addEventListener('submit', e => { e.preventDefault(); const name = categoryForm.elements['category-name'].value; const id = categoryForm.elements['category-id'].value || generateSlug(name); saveData('categories', id, { id, name }); categoryForm.reset(); categoryForm.elements['category-id'].value = ''; });
                aboutMeForm.addEventListener('submit', e => { e.preventDefault(); saveData('site_content', 'about_me', { text: aboutMeForm.elements['about-me-text-input'].value, images: aboutMeForm.elements['about-me-images-input'].value.split('\n').filter(Boolean) }); });
                
                blogPostForm.addEventListener('submit', async e => {
                    e.preventDefault();
                    const form = e.target;
                    const isEditing = !!form.elements['blog-post-id'].value;
                    const id = isEditing ? form.elements['blog-post-id'].value : db.collection('blog_posts').doc().id;
                    const i18nData = {};
                    let hasContent = false;
                    langs.forEach(lang => {
                        const title = document.getElementById(`blog-title-${lang}`).value.trim();
                        if (title) {
                            hasContent = true;
                            // <!-- ИЗМЕНЕНИЕ НАЧАЛО: Собираем данные из новых полей при сохранении -->
                            i18nData[lang] = {
                                title: title,
                                subtitle: document.getElementById(`blog-subtitle-${lang}`).value.trim(),
                                content: document.getElementById(`blog-content-${lang}`).value.trim(),
                                slug: generateSlug(title),
                                seoTitle: document.getElementById(`blog-seo-title-${lang}`).value.trim(),
                                metaDescription: document.getElementById(`blog-meta-description-${lang}`).value.trim()
                            };
                            // <!-- ИЗМЕНЕНИЕ КОНЕЦ -->
                        }
                    });
                    if (!hasContent) {
                        alert("Error: Please fill in the title for at least one language.");
                        return;
                    }
                    const postData = {
                        id,
                        i18n: i18nData,
                        mediaUrls: document.getElementById('blog-post-media').value.split('\n').filter(Boolean)
                    };
                    if (!isEditing) {
                        postData.timestamp = firebase.firestore.FieldValue.serverTimestamp();
                    }
                    try {
                        await db.collection('blog_posts').doc(id).set(postData, {
                            merge: true
                        });
                        alert('Post saved successfully!');
                        form.reset();
                        form.elements['blog-post-id'].value = '';
                        await initializeData();
                    } catch (error) {
                        console.error("Error saving blog post:", error);
                        alert("Error saving data. Check console.");
                    }
                });
                
                document.querySelectorAll('.lang-title-field').forEach(input => { input.addEventListener('input', e => { document.getElementById(`blog-slug-${e.target.dataset.lang}`).value = generateSlug(e.target.value); }); });
                document.getElementById('blog-lang-tabs').addEventListener('click', e => { if (e.target.classList.contains('lang-tab')) { const lang = e.target.dataset.lang; document.querySelectorAll('#blog-lang-tabs .lang-tab, #blog-tab .lang-tab-content').forEach(el => el.classList.remove('active')); e.target.classList.add('active'); document.getElementById(`blog-lang-content-${lang}`).classList.add('active'); } });
            }
            
            initializeData();
            setupAdminListeners();
        }
        initializeSite();
    </script>
</body>
</html>